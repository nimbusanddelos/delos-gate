<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="delos-key" content="v1">
  <title>Delos Circle Gate</title>
  <style>
    body{font-family:Arial;background:#000;color:#0f0;text-align:center;padding:50px;}
    h1{font-size:2em;}
    .status{color:#0f0;}
    .error{color:#f00;}
  </style>
</head>
<body>
  <h1>‚ö° Delos Circle Gate ‚ö°</h1>
  <p id="status" class="status">Plug in YubiKey ‚Üí <strong>Touch when it blinks</strong></p>

  <script>
    // WARNING: ONE-TIME OATH
    if (!localStorage.getItem('delos-oath')) {
      if (confirm("‚ö†Ô∏è DELOS KEY OATH ‚ö†Ô∏è\n\nThis key holds the gates.\nLose it without backup ‚Üí your digital life ends.\n\nSwear to protect it?")) {
        localStorage.setItem('delos-oath', 'true');
      } else {
        document.body.innerHTML = "<h1 style='color:#f00;'>Oath Denied. Gate Closed.</h1>";
        throw new Error("Oath rejected");
      }
    }

    // AUTO-HANDSHAKE
    async function delosHandshake() {
      document.getElementById("status").innerHTML = "üîµ Requesting key...";
      const challenge = new TextEncoder().encode("delos-circle-2025-wizard");
      const publicKey = {
        challenge: challenge,
        allowCredentials: [],
        rpId: window.location.hostname,
        userVerification: "required",
        timeout: 60000
      };
      try {
        const assertion = await navigator.credentials.get({ publicKey });
        document.getElementById("status").innerHTML = `
          <div class="status">‚úÖ DELOS KEY VERIFIED</div>
          <h2>WELCOME, WIZARD.</h2>
          <small>Key ID: ${assertion.id.slice(0,16)}...</small>
        `;
      } catch (err) {
        document.getElementById("status").innerHTML = `
          <div class="error">‚ùå FAILED: ${err.message}</div>
          <p>Try again or register at webauthn.io</p>
        `;
      }
    }
    if ('credentials' in navigator) setTimeout(delosHandshake, 1000);
  </script>
</body>
</html>